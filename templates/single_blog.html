{% extends "base.html" %}

{% block content %}
<div class="flex flex-col lg:flex-row gap-8 font-sans mt-8 mb-12">
  
  <div class="w-full lg:w-[80%]">
    <article>
      
      <header class="mb-6">
        <h1 class="text-4xl md:text-3xl font-medium text-gray-900 mb-3 leading-tight" style="font-family:Cambria">
          {{ single_blog.title }}
        </h1>
        
        <div class="flex items-center flex-wrap gap-3 text-[14px] text-gray-500 mb-4">
          <span class="" style="font-family:Inter">Posted on {{ single_blog.created_at }} by {{ single_blog.author }}</span>
          <a class="bg-orange-500 hover:bg-orange-600 text-white text-[11px] font-semibold py-1 px-3 rounded uppercase tracking-wide transition-colors" href="#!" style="font-family:Inter">
            {{ single_blog.category }}
          </a>
        </div>
      </header>

      <figure class="mb-8 overflow-hidden rounded-md shadow-sm border border-gray-100 bg-top">
        <img class="w-full object-fill h-[300px] object-cover" src="{{ single_blog.featured_image.url }}" alt="{{ single_blog.title }}" / >
      </figure>

      <section class="mb-10 border-b border-gray-200 pb-8">
        <p class="text-[16px] font-medium text-gray-800 mb-5 leading-relaxed"  style="font-family:Inter">
          {{ single_blog.short_description }}
        </p>
        <div class="text-[15px] text-gray-700 leading-relaxed space-y-4"   style="font-family:Inter">
          {{ single_blog.blog_body }}
        </div>
      </section>

      <section class="mt-8">
        <h4 class="text-xl font-semibold text-zinc-800 mb-6 border-b pb-2">Comments ({{ comment_count }})</h4>
        
        <div class="space-y-4 mb-8">
          {% if comments %}
            {% for comment in comments %}
              <div class="bg-gray-50 border border-gray-100 p-4 rounded-md">
                <p class="text-gray-800 text-[14px] mb-2">{{ comment }}</p>
                <div class="flex items-center gap-2 text-[12px] text-gray-500">
                  <span class="font-medium text-gray-700">By {{ comment.user }}</span>
                  <span class="text-gray-300">â€¢</span>
                  <span>{{ comment.created_at | timesince }} ago</span>
                </div>
              </div>
            {% endfor %}
          {% else %}
            <p class="text-gray-500 text-sm italic">No comments yet.</p>
          {% endif %}
        </div>

        <div class="bg-white p-6 border border-gray-100 rounded-md shadow-sm">
          {% if user.is_authenticated %}
            <form action="" method="POST" class="flex flex-col gap-3">
              {% csrf_token %}
              <textarea name="comment" rows="3" class="w-full border border-gray-300 rounded-md p-3 text-[14px] focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors" placeholder="Write your comment..."></textarea>
              <div>
                <input type="submit" value="Submit" class="bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-5 rounded-md text-sm cursor-pointer transition-colors">
              </div>
            </form>
          {% else %}
            <p class="text-gray-700 text-sm">
              Please <a href="{% url 'login' %}" class="text-orange-600 font-semibold hover:underline">login</a> to write a comment!
            </p>
          {% endif %}
        </div>
      </section>

    </article>
  </div>

  <aside class="w-full lg:w-[20%] text-sm flex flex-col gap-6 ">
    
    <div class="bg-gray-50 border border-gray-100 p-4 rounded-sm border border-gray-400">
      <h4 class="font-semibold text-gray-900 mb-3 border-b pb-2">Categories</h4>
      <ul class="flex flex-col gap-2">
        {% for cat in categories %}
        <li>
          <a href="{% url 'post_by_category' cat.id %}" class="text-gray-600 hover:text-orange-600 hover:underline transition-colors">
            {{ cat.category_name }}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>

    {% if social_links %}
    <div class="bg-gray-50 border border-gray-100 p-4 rounded-sm">
      <h4 class="font-semibold text-gray-900 mb-3 border-b pb-2">Follow Us</h4>
      <ul class="flex flex-col gap-2">
        {% for i in social_links %}
        <li>
          <a href="{{ i.link }}" target="_blank" class="text-gray-600 hover:text-orange-600 hover:underline transition-colors">
            {{ i.platform }}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

  </aside>

</div>
{% endblock content %}